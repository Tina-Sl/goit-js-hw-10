{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// 1. Розміщую функції\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}\n\nfunction addZero(value) {\n  return value.toString().padStart(2, '0');\n}\n// 2. Оголошую змінні\nconst myInput = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\n\nconst spanDays = document.querySelector('span[data-days]');\nconst spanHours = document.querySelector('span[data-hours]');\nconst spanMinutes = document.querySelector('span[data-minutes]');\nconst spanSeconds = document.querySelector('span[data-seconds]');\n\nlet userTime;\nlet startTime;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < new Date()) {\n      startBtn.disabled = true;\n      iziToast.error({\n        backgroundColor: 'red',\n        title: 'Error',\n        theme: 'dark',\n        iconUrl: './img/bi_x-octagon.svg',\n        iconColor: '#ffffff',\n        message: 'Please choose a date in the future',\n        position: 'topCenter',\n      });\n      return;\n    }\n    startTime = options.defaultDate;\n    userTime = selectedDates[0];\n    startBtn.disabled = false;\n  },\n};\n\n// 3. Виконання програми\nstartBtn.disabled = true;\n\nconst fp = flatpickr(myInput, options);\n\nstartBtn.addEventListener('click', () => {\n  startBtn.disabled = true;\n  myInput.disabled = true;\n  // Встановлюємо дату - поточну дату-час на момент натискання кнопки\n  // і дату користувача з поточними годиною-минутами-секундами,\n  // не змінюємо дату на поточну, якщо дата-час користувача на момент\n  // старту таймера (натискання кнопки Старт) стала < поточної дати=часу\n  // і не встановлюємо поточний час користувачу якщо ці дати - один день\n  if (new Date() < userTime) {\n    startTime = new Date();\n  }\n  if (\n    !(userTime.toString().slice(0, 15) === startTime.toString().slice(0, 15))\n  ) {\n    userTime.setHours(startTime.getHours());\n    userTime.setMinutes(startTime.getMinutes());\n    userTime.setSeconds(startTime.getSeconds());\n  }\n\n  let intervalTime = userTime.getTime() - startTime.getTime();\n  const intervalId = setInterval(() => {\n    if (intervalTime > 0) {\n      const obj = convertMs(intervalTime);\n      spanDays.innerHTML = addZero(obj.days);\n      spanHours.innerHTML = addZero(obj.hours);\n      spanMinutes.innerHTML = addZero(obj.minutes);\n      spanSeconds.innerHTML = addZero(obj.seconds);\n      intervalTime -= 1000;\n    } else {\n      clearInterval(intervalId);\n      myInput.disabled = false;\n    }\n  }, 1000);\n\n  // якщо таймер включився надовго - треба мати можливість його зупинити\n  const timer = document.querySelector('.timer');\n  timer.onclick = function () {\n    clearInterval(intervalId);\n    myInput.disabled = false;\n    spanDays.innerHTML = '00';\n    spanHours.innerHTML = '00';\n    spanMinutes.innerHTML = '00';\n    spanSeconds.innerHTML = '00';\n\n    console.log('finis');\n  };\n});\n"],"names":["convertMs","ms","days","hours","minutes","seconds","addZero","value","myInput","startBtn","spanDays","spanHours","spanMinutes","spanSeconds","userTime","startTime","options","selectedDates","iziToast","flatpickr","intervalTime","intervalId","obj","timer"],"mappings":"2GAMA,SAASA,EAAUC,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAQC,EAAO,CACtB,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,MAAMC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,oBAAoB,EAEtDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAE/D,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,CAAC,EAAI,IAAI,KAAQ,CACjCR,EAAS,SAAW,GACpBS,EAAS,MAAM,CACb,gBAAiB,MACjB,MAAO,QACP,MAAO,OACP,QAAS,yBACT,UAAW,UACX,QAAS,qCACT,SAAU,WAClB,CAAO,EACD,MACD,CACDH,EAAYC,EAAQ,YACpBF,EAAWG,EAAc,CAAC,EAC1BR,EAAS,SAAW,EACrB,CACH,EAGAA,EAAS,SAAW,GAETU,EAAUX,EAASQ,CAAO,EAErCP,EAAS,iBAAiB,QAAS,IAAM,CACvCA,EAAS,SAAW,GACpBD,EAAQ,SAAW,GAMf,IAAI,KAASM,IACfC,EAAY,IAAI,MAGdD,EAAS,SAAQ,EAAG,MAAM,EAAG,EAAE,IAAMC,EAAU,SAAQ,EAAG,MAAM,EAAG,EAAE,IAEvED,EAAS,SAASC,EAAU,SAAU,CAAA,EACtCD,EAAS,WAAWC,EAAU,WAAY,CAAA,EAC1CD,EAAS,WAAWC,EAAU,WAAY,CAAA,GAG5C,IAAIK,EAAeN,EAAS,QAAS,EAAGC,EAAU,QAAO,EACzD,MAAMM,EAAa,YAAY,IAAM,CACnC,GAAID,EAAe,EAAG,CACpB,MAAME,EAAMtB,EAAUoB,CAAY,EAClCV,EAAS,UAAYJ,EAAQgB,EAAI,IAAI,EACrCX,EAAU,UAAYL,EAAQgB,EAAI,KAAK,EACvCV,EAAY,UAAYN,EAAQgB,EAAI,OAAO,EAC3CT,EAAY,UAAYP,EAAQgB,EAAI,OAAO,EAC3CF,GAAgB,GACtB,MACM,cAAcC,CAAU,EACxBb,EAAQ,SAAW,EAEtB,EAAE,GAAI,EAGDe,EAAQ,SAAS,cAAc,QAAQ,EAC7CA,EAAM,QAAU,UAAY,CAC1B,cAAcF,CAAU,EACxBb,EAAQ,SAAW,GACnBE,EAAS,UAAY,KACrBC,EAAU,UAAY,KACtBC,EAAY,UAAY,KACxBC,EAAY,UAAY,KAExB,QAAQ,IAAI,OAAO,CACvB,CACA,CAAC"}